
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Seu Amigo Secreto üéÅ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Anima√ß√µes natalinas */
        .christmas-lights {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: repeating-linear-gradient(90deg, 
                #ff0000 0px 10px,
                #00ff00 10px 20px,
                #0000ff 20px 30px,
                #ffff00 30px 40px
            );
            animation: lights 2s linear infinite;
            opacity: 0.7;
        }

        @keyframes lights {
            0% { background-position: 0; }
            100% { background-position: 40px; }
        }

        .gift-reveal {
            font-size: 4em;
            animation: giftBounce 2s infinite;
            cursor: pointer;
        }

        @keyframes giftBounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(10deg); }
        }

        .result-card {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
            border: 3px solid #c41e3a;
            position: relative;
            overflow: hidden;
        }

        .decoration {
            position: absolute;
            font-size: 2em;
            opacity: 0.2;
            pointer-events: none;
        }

        .candy-cane { top: 10px; left: 10px; transform: rotate(-30deg); }
        .bell { top: 10px; right: 10px; transform: rotate(30deg); }
        .tree { bottom: 10px; left: 10px; }
        .star { bottom: 10px; right: 10px; }

        #secretFriend {
            background: linear-gradient(45deg, #ff0000, #00ff00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(360deg); }
        }
    </style>
</head>
<body class="bg-christmas">
    <div class="christmas-lights"></div>
    <div id="particles-js"></div>
    <audio id="revealSound" src="https://www.soundjay.com/misc/sounds/bell-ringing-01.mp3" preload="auto"></audio>
    <audio id="bgMusic" src="https://www.soundjay.com/misc/sounds/music-box-1.mp3" preload="auto" loop></audio>
    
    <div class="container py-5">
        <div class="result-card animate__animated animate__fadeIn">
            <div class="decoration candy-cane">üç¨</div>
            <div class="decoration bell">üîî</div>
            <div class="decoration tree">üéÑ</div>
            <div class="decoration star">‚≠ê</div>

            <div class="gift-reveal mb-4" id="giftBox">üéÅ</div>
            <div id="resultContent" style="display: none;">
                <h2 class="mb-4 animate__animated animate__fadeIn">Seu Amigo Secreto √©:</h2>
                <h1 id="secretFriend" class="display-4 mb-4 animate__animated animate__bounceIn">
                    <!-- Nome ser√° inserido via JavaScript -->
                </h1>
                <p class="text-muted mb-4 animate__animated animate__fadeIn">N√£o conte para ningu√©m! ü§´</p>
                <div class="d-grid gap-2">
                    <button onclick="copyLink()" class="btn btn-success mb-2 animate__animated animate__fadeIn">
                        üìã Copiar Link
                    </button>
                    <button onclick="window.close()" class="btn btn-secondary animate__animated animate__fadeIn">
                        ‚ùå Fechar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar part√≠culas de neve
            particlesJS('particles-js', {
                particles: {
                    number: { value: 100 },
                    color: { value: '#ffffff' },
                    shape: { type: 'circle' },
                    size: { value: 3 },
                    move: {
                        enable: true,
                        speed: 3,
                        direction: 'bottom'
                    }
                }
            });

            // Criar confetes
            createConfetti();

            // Iniciar m√∫sica de fundo com volume baixo
            const bgMusic = document.getElementById('bgMusic');
            bgMusic.volume = 0.3;
            
            // Adicionar interatividade ao presente
            const giftBox = document.getElementById('giftBox');
            const resultContent = document.getElementById('resultContent');
            const revealSound = document.getElementById('revealSound');

            giftBox.addEventListener('click', function() {
                revealSound.play();
                bgMusic.play();
                
                giftBox.style.display = 'none';
                resultContent.style.display = 'block';
                
                // Mostrar o nome do amigo secreto
                const urlParams = new URLSearchParams(window.location.search);
                const friendName = urlParams.get('friend');
                if (friendName) {
                    document.getElementById('secretFriend').textContent = 
                        decodeURIComponent(friendName);
                }

                // Adicionar mais confetes na revela√ß√£o
                createConfetti();
            });

            // Verificar se o participante tem acesso ao resultado
            const urlParams = new URLSearchParams(window.location.search);
            const drawId = urlParams.get('draw');
            const participantId = urlParams.get('participant');
            
            if (drawId && participantId) {
                const receiver = localStorage.getItem(`draw_${drawId}`);
                const authorizedParticipant = localStorage.getItem(`participant_${drawId}`);
                
                if (receiver) {
                    document.getElementById('secretFriend').textContent = receiver;
                } else {
                    document.getElementById('secretFriend').textContent = 'Link inv√°lido ou expirado';
                }
            }
        });

        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.backgroundColor = ['#ff0000', '#00ff00', '#0000ff', '#ffff00'][Math.floor(Math.random() * 4)];
                document.body.appendChild(confetti);

                // Remover confete ap√≥s a anima√ß√£o
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        function copyLink() {
            // Copia o link atual da p√°gina
            navigator.clipboard.writeText(window.location.href).then(() => {
                // Muda temporariamente o texto do bot√£o para feedback
                const button = document.querySelector('.btn-success');
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Link Copiado!';
                
                // Volta ao texto original ap√≥s 2 segundos
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            });
        }
    </script>
</body>
</html> 
