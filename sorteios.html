<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Gerenciar Sorteios üéÖ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        .draw-list {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        .participant-card {
            background: white;
            border: 2px solid #c41e3a;
            border-radius: 10px;
            margin-bottom: 10px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .participant-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(196, 30, 58, 0.3);
        }

        .copy-button {
            transition: all 0.3s ease;
        }

        .copy-button:hover {
            transform: scale(1.05);
        }

        .christmas-lights {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: repeating-linear-gradient(90deg, 
                #ff0000 0px 10px,
                #00ff00 10px 20px,
                #0000ff 20px 30px,
                #ffff00 30px 40px
            );
            animation: lights 2s linear infinite;
            opacity: 0.7;
        }

        @keyframes lights {
            0% { background-position: 0; }
            100% { background-position: 40px; }
        }
    </style>
</head>
<body class="bg-christmas">
    <div class="christmas-lights"></div>
    <div id="particles-js"></div>

    <div class="container py-5">
        <h1 class="text-center text-white mb-4 animate__animated animate__bounce">
            üéÑ Gerenciar Sorteios üéÅ
        </h1>

        <div class="draw-list animate__animated animate__fadeIn">
            <div id="drawsList">
                <!-- Lista de sorteios ser√° inserida aqui -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar part√≠culas de neve
            particlesJS('particles-js', {
                particles: {
                    number: { value: 50 },
                    color: { value: '#ffffff' },
                    shape: { type: 'circle' },
                    size: { value: 3 },
                    move: {
                        enable: true,
                        speed: 3,
                        direction: 'bottom'
                    }
                }
            });

            // Carregar e mostrar sorteios
            loadDraws();
        });

        function loadDraws() {
            const draws = JSON.parse(localStorage.getItem('secretSantaDraws') || '{}');
            const drawsList = document.getElementById('drawsList');
            drawsList.innerHTML = '';

            Object.entries(draws).forEach(([giver, receiver]) => {
                const card = document.createElement('div');
                card.className = 'participant-card animate__animated animate__fadeIn';
                
                const currentUrl = window.location.href.split('/').slice(0, -1).join('/');
                const resultUrl = `${currentUrl}/resultado.html?friend=${encodeURIComponent(receiver)}&id=${encodeURIComponent(giver)}`;

                card.innerHTML = `
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h5 class="mb-0">üéÖ ${giver}</h5>
                            <small class="text-muted">Link individual do sorteio</small>
                        </div>
                        <button onclick="copyLink('${resultUrl}')" class="btn btn-success btn-sm copy-button">
                            üìã Copiar Link
                        </button>
                    </div>
                `;

                drawsList.appendChild(card);
            });

            if (Object.keys(draws).length === 0) {
                drawsList.innerHTML = `
                    <div class="text-center text-muted p-4">
                        <h4>Nenhum sorteio realizado ainda!</h4>
                        <p>Realize um sorteio na p√°gina principal para ver os resultados aqui.</p>
                    </div>
                `;
            }
        }

        function copyLink(url) {
            navigator.clipboard.writeText(url).then(() => {
                // Feedback visual tempor√°rio
                const button = event.target;
                const originalText = button.innerHTML;
                button.innerHTML = '‚úÖ Copiado!';
                setTimeout(() => {
                    button.innerHTML = originalText;
                }, 2000);
            });
        }
    </script>
</body>
</html> 